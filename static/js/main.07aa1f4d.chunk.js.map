{"version":3,"sources":["Defaults.js","Limits.js","Root.js","Parameters.js","ComplexInput.js","FractalWidget.js","shader.js","SettingsWidget.js","Canvas.js","App.js","index.js"],"names":["nf","EPS","RIR","ZMF","MRC","DRC","DDP","DMI","DSF","predefColors","Limits","original","arguments","length","undefined","Object","classCallCheck","this","top","right","bottom","left","width","zf","w2","h2","height","xMid","yMid","zoomin","xw","yw","zoom","wZoom","hZoom","x","y","dx","window","innerWidth","dy","innerHeight","move","resize","reset","Point","other","Root","value","color","parameters","Parameters","limits","maxIterations","damping","Complex","setRoots","roots","i","push","rootCount","angle","Math","PI","cos","sin","z","re","im","p","d","complex2point","distance","abs","vec2","toVector","vec3","ComplexInput","props","_this","possibleConstructorReturn","getPrototypeOf","call","state","intent","Intent","NONE","complex","event","valid","input","target","isNaN","e","setState","onValueChange","DANGER","_this2","react_default","a","createElement","inputGroup","disabled","fill","large","leftIcon","placeholder","rightElement","round","type","onChange","inputChanged","React","Component","DraggingMode","dragger","mode","previousPos","index","fractalWidget","canvas","gl","getContext","alert","program","createProgram","addShaderFromText","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","setupVertices","useProgram","enableVertexAttribArray","vertexAttribPointer","FLOAT","FALSE","Float32Array","BYTES_PER_ELEMENT","uniform1i","getUniformLocation","uniform4fv","vec4","uniform2f","uniform2fv","rootsVec2","uniform3fv","colorsVec3","drawArrays","TRIANGLE_FAN","viewport","paintGL","set","clientX","clientY","rootContainsPoint","pos","point2complex","style","cursor","deltaY","text","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","attachShader","console","error","getShaderInfoLog","getProgramParameter","LINK_STATUS","validateProgram","VALIDATE_STATUS","getProgramInfoLog","verticesBufferObject","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","uniform1f","distance2complex","SettingsWidget","isOpen","size","toString","document","onkeyup","keyPressEvent","bind","assertThisInitialized","number","setZoomFactor","keyCode","log","BurgerMenu","className","noTransition","noOverlay","disableAutoFocus","customBurgerIcon","customCrossIcon","onStateChange","onStateChanged","formGroup","html","numericInput","zoomFactor","onZoomChanged","min","buttonPosition","onIterationsChanged","onDegreeChanged","max","src_ComplexInput","onDampingChanged","Canvas","getElementById","initializeGL","addEventListener","resizeGL","onmousedown","mousePressEvent","onmouseup","mouseReleaseEvent","onmousemove","mouseMoveEvent","onwheel","mouseWheelEvent","id","App","src_SettingsWidget","src_Canvas","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.07aa1f4d.chunk.js","sourcesContent":["// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nvar nf = {\r\n\tEPS: \t1e-3,\t\t\t\t\t// Max error allowed\r\n\tRIR:\t5,\t\t\t\t\t\t// Root indicator radius\r\n\tZMF:\t0.05,\t\t\t\t\t// Zoom factor\r\n\tMRC:\t10,\t\t\t\t\t\t// Maximum root count\r\n\tDRC:\t5,\t\t\t\t\t\t// Default root count\r\n\tDDP:\t1.0,\t\t\t\t\t// Default damping factor\r\n\tDMI:\t160,\t\t\t\t\t// Default max. iterations\r\n\tDSF:\t1.0 / 700.0,\t\t\t// Default size factor for limits\r\n\tpredefColors: [\r\n\t\t[1.0, 0, 0], [0, 1.0, 0], [0, 0, 1.0],\r\n\t\t[0, 1.0, 1.0], [1.0, 0, 1.0], [1.0, 1.0, 0],\r\n\t\t[1.0, 0.5, 0], [1.0, 0, 0.5], [0, 1.0, 0.5], [0.5, 0.5, 0.5]\r\n\t]\r\n}\r\n\r\nexport default nf;","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nimport nf from \"./Defaults\";\r\n\r\nclass Limits {\r\n\tconstructor(original = false) {\r\n\t\tthis.top = 1.0;\r\n\t\tthis.right = 1.0;\r\n\t\tthis.bottom = -1.0;\r\n\t\tthis.left = -1.0;\r\n\t\tif (!original) {\r\n\t\t\tthis.original = new Limits(true);\r\n\t\t} else this.original = null;\r\n\t}\r\n\r\n\twidth() { \r\n\t\treturn this.right - this.left; \r\n\t}\r\n\r\n\theight() { \r\n\t\treturn this.top - this.bottom; \r\n\t}\r\n\r\n\tvec4() {\r\n\t\treturn [this.top, this.right, this.bottom, this.left];\r\n\t}\r\n\r\n\tzoomFactor() {\r\n\t\treturn this.original.width() / this.width();\r\n\t}\r\n\r\n\tsetZoomFactor(zf) {\r\n\t\tif (zf <= 0.0) return;\r\n\t\tlet w2 = 0.5 * this.original.width() / zf;\r\n\t\tlet h2 = 0.5 * this.original.height() / zf;\r\n\t\tlet xMid = 0.5 * this.right + 0.5 * this.left;\r\n\t\tlet yMid = 0.5 * this.top + 0.5 * this.bottom;\r\n\t\tthis.top = yMid + h2;\r\n\t\tthis.right = xMid + w2;\r\n\t\tthis.bottom = yMid - h2;\r\n\t\tthis.left = xMid - w2;\r\n\t}\r\n\t\r\n\tzoom(zoomin, xw, yw) {\r\n\t\tlet zoom = zoomin ? -nf.ZMF : nf.ZMF;\r\n\t\tlet wZoom = this.width() * zoom;\r\n\t\tlet hZoom = this.height() * zoom;\r\n\t\tthis.top += yw * hZoom;\r\n\t\tthis.right += (1.0 - xw) * wZoom;\r\n\t\tthis.bottom -= (1.0 - yw) * hZoom;\r\n\t\tthis.left -= xw * wZoom;\r\n\t}\r\n\r\n\tmove(x, y) {\r\n\t\tlet dx = x * this.width() / (window.innerWidth - 1);\r\n\t\tlet dy = y * -this.height() / (window.innerHeight - 1);\r\n\t\tthis.top += dy;\r\n\t\tthis.right += dx;\r\n\t\tthis.bottom += dy;\r\n\t\tthis.left += dx;\r\n\t\tif (this.original != null) {\r\n\t\t\tthis.original.move(x, y);\r\n\t\t}\r\n\t}\r\n\r\n\tresize(x, y) {\r\n\t\tthis.top += nf.DSF * y;\r\n\t\tthis.right += nf.DSF * x;\r\n\t\tthis.bottom -= nf.DSF * y;\r\n\t\tthis.left -= nf.DSF * x;\r\n\t\tif (this.original != null) {\r\n\t\t\tthis.original.resize(x, y);\r\n\t\t}\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.top = nf.DSF * window.innerHeight;\r\n\t\tthis.right = nf.DSF * window.innerWidth;\r\n\t\tthis.bottom = -nf.DSF * window.innerHeight;\r\n\t\tthis.left = -nf.DSF * window.innerWidth;\r\n\t\tif (this.original != null) {\r\n\t\t\tthis.original.reset();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Limits;","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nclass Point {\r\n\tconstructor(x, y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tset(x, y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tdistance(other) {\r\n\t\treturn new Point(this.x - other.x, this.y - other.y);\r\n\t}\r\n}\r\n\r\nclass Root {\r\n\tconstructor(value, color) {\r\n\t\tthis.value = value;\r\n\t\tthis.color = color;\r\n\t}\r\n}\r\n\r\nexport {\r\n\tPoint,\r\n\tRoot\r\n}","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nimport nf from \"./Defaults\";\r\nimport Limits from \"./Limits\";\r\nimport Complex from \"complex.js\"\r\nimport { Point, Root } from \"./Root\";\r\n\r\nclass Parameters {\r\n\tconstructor() {\r\n\t\tthis.limits = new Limits();\r\n\t\tthis.maxIterations = nf.DMI;\r\n\t\tthis.damping = new Complex(nf.DDP, 0.0);\r\n\t\tthis.setRoots(nf.DRC);\r\n\t}\r\n\r\n\tsetRoots(DRC) {\r\n\t\tthis.roots = [];\r\n\t\tfor (var i = 0; i < DRC; ++i) {\r\n\t\t\tthis.roots.push(new Root(new Complex(0, 0), nf.predefColors[i]));\r\n\t\t}\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\treset() {\r\n\t\tlet rootCount = this.roots.length;\r\n\t\tfor (var i = 0; i < rootCount; ++i) {\r\n\t\t\tvar angle = 2 * Math.PI * i / rootCount;\r\n\t\t\tthis.roots[i].value = new Complex(Math.cos(angle), Math.sin(angle));\r\n\t\t}\r\n\t\tthis.limits.reset();\r\n\t}\r\n\r\n\tcomplex2point(z) {\r\n\t\tlet x = (z.re - this.limits.left) * (window.innerWidth - 1) / this.limits.width();\r\n\t\tlet y = (z.im - this.limits.top) * (window.innerHeight - 1) / -this.limits.height();\r\n\t\treturn new Point(x, y);\r\n\t}\r\n\r\n\tpoint2complex(p) {\r\n\t\tlet re = p.x * this.limits.width() / (window.innerWidth - 1) + this.limits.left;\r\n\t\tlet im = p.y * -this.limits.height() / (window.innerHeight - 1) + this.limits.top;\r\n\t\treturn new Complex(re, im);\r\n\t}\r\n\r\n\tdistance2complex(d) {\r\n\t\treturn (d * this.limits.width() / (window.innerWidth - 1));\r\n\t}\r\n\r\n\trootContainsPoint(p) {\r\n\t\tlet rootCount = this.roots.length;\r\n\t\tfor (var i = 0; i < rootCount; ++i) {\r\n\t\t\tvar d = this.complex2point(this.roots[i].value).distance(p);\r\n\t\t\tif (Math.abs(d.x) < nf.RIR && Math.abs(d.y) < nf.RIR) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\trootsVec2() {\r\n\t\tvar vec2 = [];\r\n\t\tlet rootCount = this.roots.length;\r\n\t\tfor (var i = 0; i < rootCount; ++i) {\r\n\t\t\tlet value = this.roots[i].value.toVector();\r\n\t\t\tvec2.push(value[0], value[1]);\r\n\t\t}\r\n\t\treturn vec2;\r\n\t}\r\n\r\n\tcolorsVec3() {\r\n\t\tvar vec3 = [];\r\n\t\tlet rootCount = this.roots.length;\r\n\t\tfor (var i = 0; i < rootCount; ++i) {\r\n\t\t\tlet color = this.roots[i].color;\r\n\t\t\tvec3.push(color[0], color[1], color[2]);\r\n\t\t}\r\n\t\treturn vec3;\r\n\t}\r\n}\r\n\r\nvar parameters = new Parameters();\r\nexport default parameters;","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nimport React from \"react\";\r\nimport Complex from \"complex.js\"\r\nimport { InputGroup, Intent } from \"@blueprintjs/core\";\r\n\r\nclass ComplexInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tintent: Intent.NONE,\r\n\t\t\tcomplex: this.props.value\r\n\t\t}\r\n\t}\r\n\r\n\tinputChanged(event) {\r\n\t\t// Validate input\r\n\t\tlet valid = true;\r\n\t\tlet input = event.target.value;\r\n\t\ttry {\r\n\t\t\tvar c = new Complex(input);\r\n\t\t\tvalid = !c.isNaN();\r\n\t\t} catch (e) {\r\n\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\t// Set input field\r\n\t\tif (valid) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tintent: Intent.NONE,\r\n\t\t\t\tcomplex: event.target.value\r\n\t\t\t});\r\n\t\t\t// raise onValueChange event\r\n\t\t\tthis.props.onValueChange(new Complex(event.target.value));\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tintent: Intent.DANGER,\r\n\t\t\t\tcomplex: event.target.value\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<InputGroup\r\n\t\t\t\tdisabled={this.props.disabled} fill={this.props.fill} \r\n\t\t\t\tlarge={this.props.large} leftIcon={this.props.leftIcon} intent={this.state.intent}\r\n\t\t\t\tplaceholder={this.props.placeholder} rightElement={this.props.rightElement}\r\n\t\t\t\tround={this.props.round} type={this.props.type} value={this.state.complex}\r\n\t\t\t\tonChange={(event) => this.inputChanged(event)}>\r\n\t\t\t</InputGroup>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ComplexInput;","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nimport nf from \"./Defaults\";\r\nimport parameters from \"./Parameters\";\r\nimport { vshader, fshader } from \"./shader\";\r\nimport { Point } from \"./Root\";\r\n\r\n// Drag root or fractal\r\nconst DraggingMode = { \r\n\tNoDragging: \"no\", \r\n\tDraggingRoot: \"root\", \r\n\tDraggingFractal: \"fractal\" \r\n};\r\n\r\n// Dragger\r\nvar dragger = {\r\n\tmode: DraggingMode.NoDragging,\r\n\tpreviousPos: new Point(0, 0),\r\n\tindex: -1\r\n}\r\n\r\nclass FractalWidget {\r\n\tinitializeGL(canvas) {\r\n\t\t// Compile shader, create and link program\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.gl = this.canvas.getContext(\"webgl\");\r\n\t\tif (!this.gl) this.gl = this.canvas.getContext(\"experimental-webgl\");\r\n\t\tif (!this.gl) alert(\"Your browser does not support WebGL\");\r\n\t\tthis.program = this.gl.createProgram();\r\n\t\tthis.addShaderFromText(vshader, this.gl.VERTEX_SHADER);\r\n\t\tthis.addShaderFromText(fshader, this.gl.FRAGMENT_SHADER);\r\n\t\tthis.linkProgram();\r\n\t\tthis.setupVertices();\r\n\t}\r\n\r\n\tpaintGL() {\r\n\t\t// Bind program and enable vertices\r\n\t\tthis.gl.useProgram(this.program);\r\n\t\tthis.gl.enableVertexAttribArray(0);\r\n\t\tthis.gl.vertexAttribPointer(0, 3, this.gl.FLOAT, this.gl.FALSE, 3 * Float32Array.BYTES_PER_ELEMENT, 0);\r\n\t\r\n\t\t// Paint with new params\r\n\t\tthis.gl.uniform1i(this.gl.getUniformLocation(this.program, \"rootCount\"), parameters.roots.length);\r\n\t\tthis.gl.uniform4fv(this.gl.getUniformLocation(this.program, \"limits\"), parameters.limits.vec4());\r\n\t\tthis.gl.uniform1i(this.gl.getUniformLocation(this.program, \"maxIterations\"), parameters.maxIterations);\r\n\t\tthis.gl.uniform2f(this.gl.getUniformLocation(this.program, \"damping\"), parameters.damping.re, parameters.damping.im);\r\n\t\tthis.gl.uniform2f(this.gl.getUniformLocation(this.program, \"size\"), this.canvas.width, this.canvas.height);\r\n\t\tthis.gl.uniform2fv(this.gl.getUniformLocation(this.program, \"roots\"), parameters.rootsVec2());\r\n\t\tthis.gl.uniform3fv(this.gl.getUniformLocation(this.program, \"colors\"), parameters.colorsVec3());\r\n\t\tthis.gl.drawArrays(this.gl.TRIANGLE_FAN, 0, 4);\r\n\t}\r\n\r\n\tresizeGL() {\r\n\t\t// Resize canvas and limits to window size\r\n\t\tparameters.limits.resize(window.innerWidth - this.canvas.width, window.innerHeight - this.canvas.height);\r\n\t\tthis.canvas.width = window.innerWidth;\r\n\t\tthis.canvas.height = window.innerHeight;\r\n\t\tthis.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\t\tthis.paintGL();\r\n\t}\r\n\r\n\tmousePressEvent(event) {\r\n\t\t// Set cursor and dragger\r\n\t\tdragger.previousPos.set(event.clientX, event.clientY);\r\n\t\tlet i = parameters.rootContainsPoint(new Point(event.clientX, event.clientY));\r\n\t\r\n\t\t// Cursor pressed on root\r\n\t\tif (i >= 0) {\r\n\t\t\tdragger.mode = DraggingMode.DraggingRoot;\r\n\t\t\tdragger.index = i;\r\n\t\t\r\n\t\t// Cursor pressed on fractal\r\n\t\t} else {\r\n\t\t\tdragger.mode = DraggingMode.DraggingFractal;\r\n\t\t}\r\n\t}\r\n\t\r\n\tmouseMoveEvent(event) {\r\n\t\t// Move root if dragging\r\n\t\tvar pos = new Point(event.clientX, event.clientY);\r\n\t\tif (dragger.mode === DraggingMode.DraggingRoot && dragger.index >= 0 && dragger.index < parameters.roots.length) {\r\n\t\t\tparameters.roots[dragger.index].value = parameters.point2complex(pos);\r\n\t\t\tthis.canvas.style.cursor = \"grabbing\";\r\n\t\t\tthis.paintGL();\r\n\t\t\t\r\n\t\t// Else move fractal\r\n\t\t} else if (dragger.mode === DraggingMode.DraggingFractal) {\r\n\t\t\tparameters.limits.move(dragger.previousPos.x - pos.x, dragger.previousPos.y - pos.y);\r\n\t\t\tdragger.previousPos.set(pos.x, pos.y);\r\n\t\t\tthis.canvas.style.cursor = \"move\";\r\n\t\t\tthis.paintGL();\r\n\t\t\t\r\n\t\t// Else if over root change cursor\r\n\t\t} else {\r\n\t\t\tif (parameters.rootContainsPoint(pos) >= 0) {\r\n\t\t\t\tthis.canvas.style.cursor = \"grab\";\r\n\t\t\t} else this.canvas.style.cursor = \"default\";\r\n\t\t}\r\n\t}\r\n\t\r\n\tmouseReleaseEvent(event) {\r\n\t\t// Reset dragger and repaint\r\n\t\tdragger.mode = DraggingMode.NoDragging;\r\n\t\tdragger.index = -1;\r\n\t\tthis.paintGL();\r\n\t}\r\n\t\r\n\tmouseWheelEvent(event) {\r\n\t\t// Calculate weight\r\n\t\tlet xw = event.clientX / this.canvas.width;\r\n\t\tlet yw = event.clientY / this.canvas.height;\r\n\t\r\n\t\t// Zoom fractal in / out\r\n\t\tlet zoomin = event.deltaY < 0;\r\n\t\tparameters.limits.zoom(zoomin, xw, yw);\r\n\t\tthis.paintGL();\r\n\t}\r\n\r\n\taddShaderFromText(text, type) {\r\n\t\t// Compile shader\r\n\t\tvar shader = this.gl.createShader(type);\r\n\t\tthis.gl.shaderSource(shader, text);\r\n\t\tthis.gl.compileShader(shader);\r\n\t\tif (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\r\n\t\t\tconsole.error(\"Error compiling shader!\", this.gl.getShaderInfoLog(shader));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Attach shader to program\r\n\t\tthis.gl.attachShader(this.program, shader);\r\n\t}\r\n\r\n\tlinkProgram() {\r\n\t\t// Link program\r\n\t\tthis.gl.linkProgram(this.program);\r\n\t\tif (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) {\r\n\t\t\tconsole.error(\"Error linking the program!\", this.gl.getProgramInfoLog(this.program));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Validate program\r\n\t\tthis.gl.validateProgram(this.program);\r\n\t\tif (!this.gl.getProgramParameter(this.program, this.gl.VALIDATE_STATUS)) {\r\n\t\t\tconsole.error(\"Error validating the program!\", this.gl.getProgramInfoLog(this.program));\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tsetupVertices() {\r\n\t\t// Setup default vbo that will never change\r\n\t\tconst vertices = [-1.0, -1.0, 0.0, 1.0, -1.0, 0.0, 1.0, 1.0, 0.0, -1.0, 1.0, 0.0];\r\n\t\tvar verticesBufferObject = this.gl.createBuffer();\r\n\t\tthis.gl.useProgram(this.program);\r\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, verticesBufferObject);\r\n\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(vertices), this.gl.STATIC_DRAW);\r\n\t\tthis.gl.uniform1f(this.gl.getUniformLocation(this.program, \"EPS\"), nf.EPS);\r\n\t\tthis.gl.uniform1f(this.gl.getUniformLocation(this.program, \"RIR\"), parameters.distance2complex(nf.RIR));\r\n\t}\r\n}\r\n\r\nvar fractalWidget = new FractalWidget();\r\nexport default fractalWidget;","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nconst vshader = `\r\nprecision mediump float;\r\nattribute vec2 vPosition;\r\n\r\nvoid main()\r\n{\r\n\tgl_Position = vec4(vPosition, 0.0, 1.0);\r\n}\r\n`;\r\n\r\nconst fshader = `\r\nprecision mediump float;\r\nconst int MIT = 2000;\t\t// Upper limit of max iterations\r\nuniform float EPS;          // Max error allowed\r\nuniform float RIR;          // Root indicator radius\r\nuniform int rootCount;      // Number of roots <= 10\r\nuniform int maxIterations;  // Maximum number of iterations\r\nuniform vec2 damping;       // Complex damping factor\r\nuniform vec2 size;          // Width = x, height = y\r\nuniform vec4 limits;        // Top = x, right = y, bottom = z, left = w\r\nuniform vec2 roots[10];     // Real = x, imaginary = y\r\nuniform vec3 colors[10];    // Rgba\r\n\r\nvec2 cmpxcjg(vec2 c)\r\n{\r\n\t// Complex conjugate\r\n\treturn vec2(c.x, -c.y);\r\n}\r\n\r\nvec2 cmpxmul(vec2 a, vec2 b)\r\n{\r\n\t// Complex multiplication\r\n\treturn vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\r\n}\r\n\r\nvec2 cmpxdiv(vec2 a, vec2 b)\r\n{\r\n\t// Complex division\r\n\treturn cmpxmul(a, cmpxcjg(b)) / dot(b, b);\r\n}\r\n\r\nvec3 rgb2hsv(vec3 c)\r\n{\r\n\t// Convert vec3.rgb to vec3.hsv\r\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\r\n\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\r\n\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\r\n\tfloat d = q.x - min(q.w, q.y);\r\n\tfloat e = 1.0e-10;\r\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\r\n}\r\n\r\nvec3 hsv2rgb(vec3 c)\r\n{\r\n\t// Convert vec3.hsv to vec3.rgb\r\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\r\n}\r\n\r\nvec3 darker(vec3 c, float f)\r\n{\r\n\t// Darken the color by f\r\n\tif (f > 1.0) {\r\n\t\tvec3 hsv = rgb2hsv(c);\r\n\t\thsv.z = hsv.z / f;\r\n\t\treturn hsv2rgb(hsv);\r\n\r\n\t// Lighten the color by 1/f\r\n\t} else if (f < 1.0) {\r\n\t\tvec3 hsv = rgb2hsv(c);\r\n\t\thsv.y = hsv.y * f;\r\n\t\treturn hsv2rgb(hsv);\r\n\r\n\t// Do nothing if f == 1.0\r\n\t} else return c;\r\n}\r\n\r\nvoid func(vec2 z, inout vec2 f, inout vec2 df)\r\n{\r\n\t// Test if more than 2 roots\r\n\tif (rootCount < 2) return;\r\n\r\n\t// Calculate f and derivative with given roots\r\n\tvec2 r = z - roots[0];\r\n\tvec2 l = z - roots[1];\r\n\tfor (int i = 1; i < 10 - 1; ++i) {\r\n\t\t\tif (i >= rootCount - 1) {\r\n\t\t\t\t f = cmpxmul(r, (z - roots[i]));\r\n\t\t\t\t break;\r\n\t\t\t }\r\n\t\t\tl = cmpxmul((z - roots[i + 1]), (l + r));\r\n\t\t\tr = cmpxmul(r, (z - roots[i]));\r\n\t\t}\r\n\tdf = l + r;\r\n\t// f = cmpxmul(r, (z - roots[rootCount - 1]));\r\n}\r\n\r\nvoid main()\r\n{\r\n\t// Get complex number from pixel position and limits\r\n\tfloat xFactor = float(limits.y - limits.w) / float(size.x - 1.0);\r\n\tfloat yFactor = float(limits.z - limits.x) / float(size.y - 1.0);\r\n\tvec2 z = vec2(gl_FragCoord.x * xFactor + limits.w, (size.y - gl_FragCoord.y) * yFactor + limits.x);\r\n\r\n\t// Root indicator if close enough to root\r\n\tfor (int r = 0; r < 10; ++r) {\r\n\t\tif (r >= rootCount) break;\r\n\t\tif (length(z - roots[r]) < RIR - 0.005) {\r\n\t\t\tgl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);\r\n\t\t\treturn;\r\n\t\t} else if (length(z - roots[r]) < RIR) {\r\n\t\t\tgl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t// Newton iteration\r\n\tfor (int i = 0; i < MIT; ++i) {\r\n\t\tif (i >= maxIterations) break;\r\n\t\tvec2 f, df;\r\n\t\tfunc(z, f, df);\r\n\t\t//f = cmpxmul(z, cmpxmul(z, z)) - vec2(1.0, 0.0);\r\n\t\t//df = 3.0 * cmpxmul(z, z);\r\n\t\tvec2 z0 = z - cmpxmul(damping, cmpxdiv(f, df));\r\n\r\n\t\t// Check which root was reached\r\n\t\tif (length(z0 - z) < EPS) {\r\n\t\t\tfor (int r = 0; r < 10; ++r) {\r\n\t\t\t\tif (r >= rootCount) break;\r\n\t\t\t\tif (length(z0 - roots[r]) < EPS) {\r\n\r\n\t\t\t\t\t// Color by root and number of iterations\r\n\t\t\t\t\tgl_FragColor = vec4(darker(colors[r], float(50 + i * 8) / 100.0), 1.0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tz = z0;\r\n\t}\r\n\r\n\t// No root -> black\r\n\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\r\n}\r\n`;\r\n\r\nexport {\r\n\tvshader,\r\n\tfshader\r\n};","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nimport React from \"react\";\r\nimport parameters from \"./Parameters\";\r\nimport ComplexInput from \"./ComplexInput\";\r\nimport fractalWidget from \"./FractalWidget\";\r\nimport { slide as Menu } from \"react-burger-menu\";\r\nimport { NumericInput, FormGroup, Label, InputGroup } from \"@blueprintjs/core\";\r\nimport \"./styles.css\";\r\n\r\nclass SettingsWidget extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisOpen: true,\r\n\t\t\tsize: window.innerWidth.toString() + \" x \" + window.innerHeight.toString()\r\n\t\t}\r\n\r\n\t\t// Bind key event handler\r\n\t\tdocument.onkeyup = this.keyPressEvent.bind(this);\r\n\t}\r\n\r\n\tonStateChanged(state) {\r\n\t\t// Update SettingsWidget state from Menu state\r\n\t\tthis.setState({isOpen: state.isOpen});\r\n\t}\r\n\r\n\tonZoomChanged(number) {\r\n\t\t// Update parameters and repaint\r\n\t\tparameters.limits.setZoomFactor(number / 100.0);\r\n\t\tfractalWidget.paintGL();\r\n\t}\r\n\r\n\tonIterationsChanged(number) {\r\n\t\t// Update parameters and repaint\r\n\t\tparameters.maxIterations = number;\r\n\t\tfractalWidget.paintGL();\r\n\t}\r\n\r\n\tonDegreeChanged(number) {\r\n\t\t// Update parameters and repaint\r\n\t\tparameters.setRoots(number);\r\n\t\tfractalWidget.paintGL();\r\n\t}\r\n\r\n\tonDampingChanged(number) {\r\n\t\t// Update parameters and repaint\r\n\t\tparameters.damping = number;\r\n\t\tfractalWidget.paintGL();\r\n\t}\r\n\r\n\tkeyPressEvent(event) {\r\n\t\t// Which key\r\n\t\tlet ascii = event.keyCode;\r\n\t\tswitch (ascii) {\r\n\t\t\tcase 83: this.setState(state => ({isOpen: !state.isOpen})); break;\r\n\t\t\tcase 79: console.log(\"o was pressed\"); break;\r\n\t\t\tcase 80: console.log(\"p was pressed\"); break;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Menu className=\"settingsWidget\"\r\n\t\t\t\tright width={320} noTransition noOverlay disableAutoFocus\r\n\t\t\t\tcustomBurgerIcon={false} customCrossIcon={false}\r\n\t\t\t\tisOpen={this.state.isOpen} onStateChange={(state) => this.onStateChanged(state)}>\r\n\t\t\t\t<FormGroup className=\"bp3-dark\">\r\n\t\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t\t<h2>NewtonFractal WebGL</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"settingsItems\">\r\n\t\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t\t<Label>Fractal size</Label>\r\n\t\t\t\t\t\t\t<InputGroup\r\n\t\t\t\t\t\t\t\tdisabled value={this.state.size} leftIcon=\"fullscreen\" fill={true}>\r\n\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t\t<Label>Zoom factor (%)</Label>\r\n\t\t\t\t\t\t\t<NumericInput\r\n\t\t\t\t\t\t\t\tvalue={parameters.limits.zoomFactor() * 100.0} onValueChange={(number) => this.onZoomChanged(number)} \r\n\t\t\t\t\t\t\t\tmin={0.01} buttonPosition=\"right\" leftIcon=\"zoom-in\" fill={true}>\r\n\t\t\t\t\t\t\t</NumericInput>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t\t<Label>Max number of iterations</Label>\r\n\t\t\t\t\t\t\t<NumericInput \r\n\t\t\t\t\t\t\t\tvalue={parameters.maxIterations} onValueChange={(number) => this.onIterationsChanged(number)} \r\n\t\t\t\t\t\t\t\tmin={1} buttonPosition=\"right\" leftIcon=\"repeat\" fill={true}>\r\n\t\t\t\t\t\t\t</NumericInput>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t\t<Label>Number of roots</Label>\r\n\t\t\t\t\t\t\t<NumericInput \r\n\t\t\t\t\t\t\t\tvalue={parameters.roots.length} onValueChange={(number) => this.onDegreeChanged(number)}\r\n\t\t\t\t\t\t\t\tmin={2} max={10} buttonPosition=\"right\" leftIcon=\"graph\" fill={true}>\r\n\t\t\t\t\t\t\t</NumericInput>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t\t<Label>Damping factor</Label>\r\n\t\t\t\t\t\t\t<ComplexInput\r\n\t\t\t\t\t\t\t\tvalue={parameters.damping} leftIcon=\"derive-column\" fill={true} onValueChange={(number) => this.onDampingChanged(number)}>\r\n\t\t\t\t\t\t\t</ComplexInput>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormGroup>\r\n\t\t\t</Menu>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SettingsWidget;","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nimport React from \"react\";\r\nimport fractalWidget from \"./FractalWidget\";\r\n\r\nclass Canvas extends React.Component {\r\n\tcomponentDidMount() {\r\n\t\t// Get canvas and WebGL context\r\n\t\tvar canvas = document.getElementById(\"glcanvas\");\r\n\t\tcanvas.width = window.innerWidth;\r\n\t\tcanvas.height = window.innerHeight;\r\n\t\tfractalWidget.initializeGL(canvas);\r\n\r\n\t\t// Bind events to corresponding functions\r\n\t\twindow.addEventListener(\"resize\", fractalWidget.resizeGL.bind(fractalWidget));\r\n\t\tcanvas.onmousedown = fractalWidget.mousePressEvent.bind(fractalWidget);\r\n\t\tcanvas.onmouseup = fractalWidget.mouseReleaseEvent.bind(fractalWidget);\r\n\t\tcanvas.onmousemove = fractalWidget.mouseMoveEvent.bind(fractalWidget);\r\n\t\tcanvas.onwheel = fractalWidget.mouseWheelEvent.bind(fractalWidget);\r\n\r\n\t\t// Resize and repaint\r\n\t\tfractalWidget.resizeGL();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<canvas id=\"glcanvas\"></canvas>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Canvas;","// This file is part of the NewtonFractal project.\r\n// Copyright (C) 2019 Christian Bauer and Timon Foehl\r\n// License: GNU General Public License version 3 or later,\r\n// see the file LICENSE in the main directory.\r\n\r\nimport React from \"react\";\r\nimport SettingsWidget from \"./SettingsWidget\"\r\nimport Canvas from \"./Canvas\"\r\nimport \"./styles.css\";\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<div className=\"app\">\r\n\t\t\t<SettingsWidget className=\"settingsWidget\"/>\r\n\t\t\t<Canvas className=\"fractalWidget\"/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}